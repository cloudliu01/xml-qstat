---
layout:  default
navname: Install
sidenav:
  - head: Installation
  - text: General
    href: install.html
  - text: Cocoon
    href: cocoon.html
  - text: HTTPi
    href: httpi.html
    active: true
---

<h3>Apologies</h3>
<p>
  The installation procedure for using a modified HTTPi is more than a bit
  rough at the moment, but please bear with us while we improve it.
</p>

<h3>Preamble</h3>
<p>
  The freely available
  <b><a href="http://www.floodgap.com/httpi/">HTTPi webserver</a></b>
  is a tiny (12kB), fast and secure pure-Perl webserver.

  Since &quot;<cite><a href="http://www.floodgap.com/httpi/program.html">HTTPi
  was designed first and foremost to be a hacker's webserver that was easily
  understood, easily patched and trivially maintainable</a></cite>&quot;,
  it is an ideal candidate for creating a small custom webserver
  specifically for <b>xml-qstat</b>. The implementation in Perl makes it
  highly portable, permits complex logic and rapid program development
  &ndash; all very good reasons to persue it as a platform.
</p>

<h3>HTTPi Installation (for client-side XSLT)</h3>
<p>
  HTTPi can be configured to run in several different operational modes: as
  a daemon, "on-demand" via xinetd or from launchd. The <b>xml-qstat</b>
  modules were developed using the daemonic mode, but should work fine in
  any of the modes. The daemon-mode requires no root-level privileges for
  running it. Please follow the
  <a href="http://www.floodgap.com/httpi/install.html">HTTPi installation instructions</a>
  and create a standard HTTPi webserver for your system.
  The configuration procedure of HTTPi will interactively ask a number of
  questions and when it is done will save transcript. For example,
  <em>transcript.0.configure.demonic</em> after configuring for the daemonic
  mode. These transcripts can be used to supply answers next time you
  rebuild HTTPi. After starting HTTPi, test it by
  pointing your web browser at the http://&lt;host&gt;:8080/ (assuming it
  was configured to use port 8080).
  If all goes well, you should see an error message from HTTPi complaining
  that it can't find the resource:
  <blockquote>
  <pre>
     File Not Found
     The resource / was not found on this system.
     --------------------------------------------
     httpi/1.6.1 (Demonic/Linux) by Cameron Kaiser
  </pre>
  </blockquote>
</p>


<h3>HTTPi-xmlqstat Installation</h3>
<p>
  Now that we've been successful in build HTTPi, we can do the same thing, but
  as a customized <b>xml-qstat</b> version this time.

  As previously described, the <b>xml-qstat/httpi-modules/</b>
  folder contains customized modules for HTTPi.

<pre>
$ cd xml-qstat/
$ ls -l httpi-modules/
-rw-r--r-- settings-daemonic.EXAMPLE
-rw-r--r-- httpi.in
-rw-r--r-- modules.in
-rw-r--r-- userfunc.in
-rw-r--r-- uservar.in
</pre>

The file <b>settings-daemonic.EXAMPLE</b> is simply an example transcript
file that can be used when rebuilding HTTPi, or reuse one of your own.
The various <b>*.in</b> files are our pieces for assembling an HTTPi-xmlqstat
webserver.
</p>

<p>
The only hand editing that might be required is in the
<b>uservar.in</b> file &ndash; to set the installed location of
<b>xml-qstat</b>:
<pre>
############################################
############################################
# CUSTOMIZE THIS TO MATCH YOUR REQUIREMENTS:
#

# the base location of the xmlqstat distribution
my $resourceRoot = "$ENV{HOME}/xml-qstat";

# timeout (seconds) for system command like qstat -j etc.
my $shellCmdTimeout = 10;

#
# END OF CUSTOMIZE SETTINGS
############################################
############################################
</pre>
</blockquote>


<h3>HTTPi-xmlqstat Build Procedure</h3>
<p>
  <blockquote>
    <b>This are provisional instructions and should be replaced with
    a more streamlined procedure soon.</b>
  </blockquote>

In the main <b>xml-qstat/</b> directory, we will prepare things as follows:
<pre>
$ wget http://www.floodgap.com/httpi/httpi-1.6.1.tar.gz
$ tar -xvzf httpi-1.6.1.tar.gz
$ mv httpi-1.6.1  build-httpi
$ cd build-httpi
</pre>

We will now prepare our set of standard HTTPi configuration answers, either
by using the transcript from a previous build or (for the sake of an
example) by using the example file provided:

<pre>
$ rsync -aP ../httpi-modules/settings-daemonic.EXAMPLE .
</pre>

Now get our customized pieces:
<pre>
$ rsync -aP ../httpi-modules/*.in .
</pre>

And rebuilt it:
<pre>
$ perl configure.demonic -d settings-daemonic.EXAMPLE
</pre>


Using <b>init-scripts/httpi stop</b> seems to be the easiest way of finding
and killing the HTTPi processes.

The web interface should be ready for testing.
</p>


<h3>HTTPi-xmlqstat security</h3>
<p>
  Although HTTPi will be running as a non-privileged user, the module
  has imposed extra restrictions on which Grid Engine commands can be
  executed and with which arguments.

  Additionally, the Grid Engine commands will only be executed when they
  are located in the <b>$SGE_ROOT/bin/$SGE_ARCH/</b>
  directory, where the value of <b>$SGE_ARCH</b> is determined internally by
  the program. The <b>PATH</b> will <em>not</em> be searched.
</p>

